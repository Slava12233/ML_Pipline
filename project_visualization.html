<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini PDF Fine-tuning Pipeline - Visual Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --primary-color: #4285F4;
            --secondary-color: #34A853;
            --accent-color: #EA4335;
            --light-color: #F8F9FA;
            --dark-color: #202124;
        }
        
        body {
            font-family: 'Google Sans', Arial, sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background-color: var(--light-color);
            padding-top: 56px;
        }
        
        .navbar {
            background-color: var(--primary-color);
        }
        
        .navbar-brand, .nav-link {
            color: white !important;
        }
        
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color) 0%, #5B8DEF 100%);
            color: white;
            padding: 4rem 0;
            margin-bottom: 2rem;
        }
        
        .section {
            padding: 3rem 0;
            margin-bottom: 2rem;
        }
        
        .card {
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }
        
        .module-card {
            height: 100%;
        }
        
        .module-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .table {
            width: 100%;
            margin-bottom: 1rem;
        }
        
        .table th {
            background-color: var(--primary-color);
            color: white;
        }
        
        .mermaid {
            background-color: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .feature-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .timeline {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background-color: var(--primary-color);
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
        }
        
        .timeline-container {
            padding: 10px 40px;
            position: relative;
            background-color: inherit;
            width: 50%;
        }
        
        .timeline-container::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            right: -17px;
            background-color: white;
            border: 4px solid var(--primary-color);
            top: 15px;
            border-radius: 50%;
            z-index: 1;
        }
        
        .left {
            left: 0;
        }
        
        .right {
            left: 50%;
        }
        
        .left::before {
            content: " ";
            height: 0;
            position: absolute;
            top: 22px;
            width: 0;
            z-index: 1;
            right: 30px;
            border: medium solid var(--light-color);
            border-width: 10px 0 10px 10px;
            border-color: transparent transparent transparent var(--light-color);
        }
        
        .right::before {
            content: " ";
            height: 0;
            position: absolute;
            top: 22px;
            width: 0;
            z-index: 1;
            left: 30px;
            border: medium solid var(--light-color);
            border-width: 10px 10px 10px 0;
            border-color: transparent var(--light-color) transparent transparent;
        }
        
        .right::after {
            left: -16px;
        }
        
        .timeline-content {
            padding: 20px 30px;
            background-color: white;
            position: relative;
            border-radius: 6px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        @media screen and (max-width: 600px) {
            .timeline::after {
                left: 31px;
            }
            
            .timeline-container {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }
            
            .timeline-container::before {
                left: 60px;
                border: medium solid var(--light-color);
                border-width: 10px 10px 10px 0;
                border-color: transparent var(--light-color) transparent transparent;
            }
            
            .left::after, .right::after {
                left: 15px;
            }
            
            .right {
                left: 0%;
            }
        }
        
        .footer {
            background-color: var(--dark-color);
            color: white;
            padding: 2rem 0;
            margin-top: 2rem;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-robot me-2"></i>
                Gemini PDF Fine-tuning Pipeline
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#overview">Overview</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#architecture">Architecture</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#modules">Modules</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#workflow">Workflow</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#configuration">Configuration</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#timeline">Timeline</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section" id="overview">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-4">Gemini PDF Fine-tuning Pipeline</h1>
                    <p class="lead mb-4">A streamlined pipeline for fine-tuning Google's Gemini models on PDF documentation.</p>
                    <div class="d-flex gap-3">
                        <a href="#architecture" class="btn btn-light btn-lg">
                            <i class="fas fa-project-diagram me-2"></i>
                            Explore Architecture
                        </a>
                        <a href="#modules" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-cubes me-2"></i>
                            View Modules
                        </a>
                    </div>
                </div>
                <div class="col-lg-6 d-none d-lg-block">
                    <img src="https://storage.googleapis.com/gweb-uniblog-publish-prod/images/gemini_1.width-1300.format-webp.webp" alt="Gemini AI" class="img-fluid rounded shadow">
                </div>
            </div>
        </div>
    </section>

    <!-- Key Features Section -->
    <section class="section bg-white">
        <div class="container">
            <h2 class="text-center mb-5">Key Features</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center">
                            <div class="feature-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <h4 class="card-title">PDF Processing</h4>
                            <p class="card-text">Extract text from PDFs using PyPDF2 and Document AI with semantic chunking for optimal training data.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center">
                            <div class="feature-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h4 class="card-title">PEFT/LoRA Fine-tuning</h4>
                            <p class="card-text">Parameter-Efficient Fine-Tuning with Low-Rank Adaptation for efficient model training with fewer resources.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center">
                            <div class="feature-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h4 class="card-title">Automated Deployment</h4>
                            <p class="card-text">Seamless deployment to Vertex AI Endpoints with monitoring, scaling, and comprehensive evaluation.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Architecture Section -->
    <section class="section" id="architecture">
        <div class="container">
            <h2 class="text-center mb-5">System Architecture</h2>
            <div class="card mb-5">
                <div class="card-body">
                    <div class="mermaid">
                        graph TD
                            A[PDF Documents] --> B[Text Extraction]
                            B --> C[Text Cleaning & Chunking]
                            C --> D[Training Data Generation]
                            D --> E[Data Validation]
                            E --> F[Fine-tuning with PEFT/LoRA]
                            F --> G[Model Evaluation]
                            G --> H[Model Deployment]
                            
                            subgraph "Storage Layer"
                            GCS[Google Cloud Storage]
                            end
                            
                            B -.-> GCS
                            C -.-> GCS
                            D -.-> GCS
                            E -.-> GCS
                            F -.-> GCS
                            G -.-> GCS
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">Execution Modes</div>
                        <div class="card-body">
                            <h5>Local Mode</h5>
                            <p>Run the pipeline steps locally on your machine for development and testing.</p>
                            <ul>
                                <li>Full control over execution</li>
                                <li>Easier debugging</li>
                                <li>Lower resource requirements</li>
                                <li>Suitable for small datasets</li>
                            </ul>
                            
                            <h5 class="mt-4">Vertex AI Mode</h5>
                            <p>Run the pipeline on Google Cloud Vertex AI for production workloads.</p>
                            <ul>
                                <li>Scalable resources</li>
                                <li>Managed infrastructure</li>
                                <li>Integrated monitoring</li>
                                <li>Suitable for large datasets</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">Technical Decisions</div>
                        <div class="card-body">
                            <div class="table-container">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Decision</th>
                                            <th>Choice</th>
                                            <th>Rationale</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>PDF Processing</td>
                                            <td>PyPDF2 with Document AI fallback</td>
                                            <td>Balance between cost and quality</td>
                                        </tr>
                                        <tr>
                                            <td>Fine-tuning Method</td>
                                            <td>PEFT/LoRA</td>
                                            <td>80-90% less computational requirements</td>
                                        </tr>
                                        <tr>
                                            <td>Training Data Format</td>
                                            <td>JSONL</td>
                                            <td>Compatible with Vertex AI</td>
                                        </tr>
                                        <tr>
                                            <td>Deployment</td>
                                            <td>Vertex AI Endpoints</td>
                                            <td>Seamless integration with training pipeline</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modules Section -->
    <section class="section bg-light" id="modules">
        <div class="container">
            <h2 class="text-center mb-5">Pipeline Modules</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card module-card">
                        <div class="card-body text-center">
                            <div class="module-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <h4>PDF Processing</h4>
                            <p>Extracts text and metadata from PDF files.</p>
                            <hr>
                            <h6>Key Components:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-code me-2"></i>extract.py</li>
                                <li><i class="fas fa-code me-2"></i>metadata.py</li>
                            </ul>
                            <hr>
                            <h6>Features:</h6>
                            <ul class="text-start">
                                <li>PyPDF2 extraction</li>
                                <li>Document AI integration</li>
                                <li>Metadata extraction</li>
                                <li>Text normalization</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card module-card">
                        <div class="card-body text-center">
                            <div class="module-icon">
                                <i class="fas fa-database"></i>
                            </div>
                            <h4>Data Preparation</h4>
                            <p>Generates training data from extracted text.</p>
                            <hr>
                            <h6>Key Components:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-code me-2"></i>generate.py</li>
                                <li><i class="fas fa-code me-2"></i>quality.py</li>
                                <li><i class="fas fa-code me-2"></i>export.py</li>
                            </ul>
                            <hr>
                            <h6>Features:</h6>
                            <ul class="text-start">
                                <li>Text chunking</li>
                                <li>Example generation</li>
                                <li>Quality filtering</li>
                                <li>Data splitting</li>
                                <li>GCS export</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card module-card">
                        <div class="card-body text-center">
                            <div class="module-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h4>Fine-tuning</h4>
                            <p>Fine-tunes Gemini models on the training data.</p>
                            <hr>
                            <h6>Key Components:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-code me-2"></i>config.py</li>
                                <li><i class="fas fa-code me-2"></i>train.py</li>
                                <li><i class="fas fa-code me-2"></i>hyperparameter.py</li>
                                <li><i class="fas fa-code me-2"></i>pipeline.py</li>
                            </ul>
                            <hr>
                            <h6>Features:</h6>
                            <ul class="text-start">
                                <li>PEFT/LoRA fine-tuning</li>
                                <li>Full fine-tuning</li>
                                <li>Hyperparameter optimization</li>
                                <li>Pipeline orchestration</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card module-card">
                        <div class="card-body text-center">
                            <div class="module-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h4>Evaluation</h4>
                            <p>Evaluates the performance of fine-tuned models.</p>
                            <hr>
                            <h6>Key Components:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-code me-2"></i>metrics.py</li>
                                <li><i class="fas fa-code me-2"></i>compare.py</li>
                                <li><i class="fas fa-code me-2"></i>report.py</li>
                            </ul>
                            <hr>
                            <h6>Features:</h6>
                            <ul class="text-start">
                                <li>Automated metrics</li>
                                <li>Human evaluation framework</li>
                                <li>Comparison tools</li>
                                <li>Reporting</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card module-card">
                        <div class="card-body text-center">
                            <div class="module-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h4>Deployment</h4>
                            <p>Deploys fine-tuned models to Vertex AI Endpoints.</p>
                            <hr>
                            <h6>Key Components:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-code me-2"></i>vertex.py</li>
                                <li><i class="fas fa-code me-2"></i>monitor.py</li>
                                <li><i class="fas fa-code me-2"></i>automate.py</li>
                            </ul>
                            <hr>
                            <h6>Features:</h6>
                            <ul class="text-start">
                                <li>Endpoint configuration</li>
                                <li>Model serving</li>
                                <li>Monitoring</li>
                                <li>Deployment automation</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card module-card">
                        <div class="card-body text-center">
                            <div class="module-icon">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <h4>Utilities</h4>
                            <p>Shared utilities used across the pipeline.</p>
                            <hr>
                            <h6>Key Components:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-code me-2"></i>config.py</li>
                                <li><i class="fas fa-code me-2"></i>logging.py</li>
                                <li><i class="fas fa-code me-2"></i>gcp.py</li>
                            </ul>
                            <hr>
                            <h6>Features:</h6>
                            <ul class="text-start">
                                <li>Configuration management</li>
                                <li>Logging</li>
                                <li>GCP integration</li>
                                <li>Error handling</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Workflow Section -->
    <section class="section" id="workflow">
        <div class="container">
            <h2 class="text-center mb-5">Pipeline Workflow</h2>
            <div class="card mb-5">
                <div class="card-body">
                    <div class="mermaid">
                        flowchart TD
                            A[Start] --> B{PDF Processing}
                            B -->|Extract Text| C[Text Extraction]
                            B -->|Extract Metadata| D[Metadata Extraction]
                            C --> E[Text Cleaning]
                            D --> F[Metadata Processing]
                            E --> G[Text Chunking]
                            F --> G
                            G --> H{Data Preparation}
                            H -->|Generate Examples| I[Example Generation]
                            H -->|Filter Examples| J[Quality Filtering]
                            I --> J
                            J --> K[Data Splitting]
                            K -->|Train| L[Training Data]
                            K -->|Validation| M[Validation Data]
                            K -->|Test| N[Test Data]
                            L --> O{Fine-tuning}
                            M --> O
                            O -->|Hyperparameter Optimization| P[Optimal Parameters]
                            P --> Q[Model Training]
                            Q --> R[Model Checkpoints]
                            R --> S{Evaluation}
                            N --> S
                            S -->|Calculate Metrics| T[Evaluation Metrics]
                            S -->|Generate Report| U[Evaluation Report]
                            T --> V{Deployment}
                            U --> V
                            V -->|Configure Endpoint| W[Vertex AI Endpoint]
                            V -->|Set Up Monitoring| X[Monitoring Dashboard]
                            W --> Y[End]
                            X --> Y
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-lg-6">
                    <div class="card mb-4">
                        <div class="card-header">Fine-tuning Process</div>
                        <div class="card-body">
                            <div class="mermaid">
                                graph TD
                                    A[Pre-trained Gemini Model] --> B[Add LoRA Adapters]
                                    B --> C[Freeze Base Model Parameters]
                                    C --> D[Train LoRA Parameters]
                                    D --> E[Evaluate Model]
                                    E -->|Satisfactory| F[Merge Adapters with Base Model]
                                    E -->|Unsatisfactory| G[Adjust Hyperparameters]
                                    G --> D
                                    F --> H[Export Model]
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card mb-4">
                        <div class="card-header">PEFT/LoRA Advantage</div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="peftChart"></canvas>
                            </div>
                            <div class="mt-3">
                                <p><strong>PEFT/LoRA Benefits:</strong></p>
                                <ul>
                                    <li>80-90% reduction in trainable parameters</li>
                                    <li>Significantly lower memory requirements</li>
                                    <li>Faster training time</li>
                                    <li>Comparable performance to full fine-tuning</li>
                                    <li>Lower computational cost</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Configuration Section -->
    <section class="section bg-light" id="configuration">
        <div class="container">
            <h2 class="text-center mb-5">Configuration Options</h2>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-header">Project & GCP Configuration</div>
                        <div class="card-body">
                            <div class="table-container">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Parameter</th>
                                            <th>Description</th>
                                            <th>Example</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>project.name</td>
                                            <td>Project name</td>
                                            <td>gemini-pdf-finetuning</td>
                                        </tr>
                                        <tr>
                                            <td>project.version</td>
                                            <td>Project version</td>
                                            <td>0.1.0</td>
                                        </tr>
                                        <tr>
                                            <td>gcp.project_id</td>
                                            <td>GCP project ID</td>
                                            <td>your-project-id</td>
                                        </tr>
                                        <tr>
                                            <td>gcp.region</td>
                                            <td>GCP region</td>
                                            <td>us-central1</td>
                                        </tr>
                                        <tr>
                                            <td>gcp.storage.bucket_name</td>
                                            <td>GCS bucket name</td>
                                            <td>gemini-pdf-finetuning-data</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-header">PDF Processing Configuration</div>
                        <div class="card-body">
                            <div class="table-container">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Parameter</th>
                                            <th>Description</th>
                                            <th>Example</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>extraction_method</td>
                                            <td>Method for PDF extraction</td>
                                            <td>pypdf2 or document_ai</td>
                                        </tr>
                                        <tr>
                                            <td>document_ai.processor_id</td>
                                            <td>Document AI processor ID</td>
                                            <td>your-processor-id</td>
                                        </tr>
                                        <tr>
                                            <td>chunk_size</td>
                                            <td>Maximum characters per chunk</td>
                                            <td>1000</td>
                                        </tr>
                                        <tr>
                                            <td>overlap</td>
                                            <td>Character overlap between chunks</td>
                                            <td>200</td>
                                        </tr>
                                        <tr>
                                            <td>min_chunk_length</td>
                                            <td>Minimum characters for a valid chunk</td>
                                            <td>100</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-header">Training Data Configuration</div>
                        <div class="card-body">
                            <div class="table-container">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Parameter</th>
                                            <th>Description</th>
                                            <th>Example</th>
